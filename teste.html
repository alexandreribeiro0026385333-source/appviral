<!DOCTYPE html>
<html>
<head>
    <title>Teste Supabase</title>
</head>
<body>
    <h1>üß™ Teste de Conex√£o Supabase</h1>
    
    <button onclick="testarConexao()">üîó Testar Conex√£o</button>
    <button onclick="testarInsert()">üìù Testar INSERT</button>
    
    <div id="resultado" style="margin-top: 20px; padding: 15px; border-radius: 8px;"></div>

    <script>
        const SUPABASE_URL = "https://dpzxdwzlcrerezmloidk.supabase.co";
        const SUPABASE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRwenhkd3psY3JlcmV6bWxvaWRrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM2NjIxNTksImV4cCI6MjA3OTIzODE1OX0.ls_1EaTrSDpgsiKzInPncJe7myMRkHFY71HiozKqxIY";

        // TESTE 1: Conex√£o Simples
        async function testarConexao() {
            const resultado = document.getElementById('resultado');
            resultado.innerHTML = "üîç Testando conex√£o...";
            
            try {
                const response = await fetch(SUPABASE_URL + '/rest/v1/', {
                    headers: {
                        'apikey': SUPABASE_KEY,
                        'Authorization': 'Bearer ' + SUPABASE_KEY
                    }
                });
                
                if (response.ok) {
                    resultado.style.background = '#d4edda';
                    resultado.innerHTML = "‚úÖ CONEX√ÉO OK! Supabase respondendo.";
                } else {
                    resultado.style.background = '#f8d7da';
                    resultado.innerHTML = "‚ùå Erro na conex√£o: " + response.status;
                }
            } catch (error) {
                resultado.style.background = '#f8d7da';
                resultado.innerHTML = "‚ùå ERRO: " + error.message;
            }
        }

        // TESTE 2: INSERT Simples
        async function testarInsert() {
            const resultado = document.getElementById('resultado');
            resultado.innerHTML = "üìù Tentando inserir dados...";
            
            const testeData = {
                nome: "USUARIO TESTE",
                email: "teste" + Date.now() + "@teste.com",
                telefone: "(11) 99999-9999",
                chave_pix: "123.456.789-00",
                pix_nome: "TESTE SILVA",
                saldo: 1.00,
                mensagem: "Teste de conex√£o",
                indicador_code: "TESTE" + Date.now(),
                premio: 0,
                bonus: 0,
                indicados_count: 0,
                status_online: true,
                last_active: new Date().toISOString(),
                blogsite: "",
                urlvideo: "",
                urlsound: "",
                urlnegocio: ""
            };

            try {
                const response = await fetch(SUPABASE_URL + '/rest/v1/appviral', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'apikey': SUPABASE_KEY,
                        'Authorization': 'Bearer ' + SUPABASE_KEY,
                        'Prefer': 'return=representation'
                    },
                    body: JSON.stringify([testeData])
                });

                const data = await response.json();
                
                if (response.ok) {
                    resultado.style.background = '#d4edda';
                    resultado.innerHTML = "üéâ INSERT SUCESSO! Dados gravados no banco.<br>ID: " + data[0].id;
                } else {
                    resultado.style.background = '#f8d7da';
                    resultado.innerHTML = "‚ùå ERRO NO INSERT: " + JSON.stringify(data);
                }
            } catch (error) {
                resultado.style.background = '#f8d7da';
                resultado.innerHTML = "‚ùå ERRO: " + error.message;
            }
        }
    </script>
</body>
</html>
